{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-2108bb36\"],{\"5ad1\":function(t,e,n){\"use strict\";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"createPost-container\"},[n(\"el-form\",{ref:\"postForm\",staticClass:\"form-container\",attrs:{model:t.postForm,rules:t.rules}},[n(\"sticky\",{attrs:{\"z-index\":10,\"class-name\":\"sub-navbar \"+t.postForm.status}},[n(\"el-button\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],staticStyle:{\"margin-left\":\"10px\"},attrs:{type:\"success\"},on:{click:t.submitForm}},[t._v(\" 保存配置 \")])],1),n(\"div\",{staticClass:\"createPost-main-container\"},[n(\"el-row\",[n(\"el-col\",{attrs:{span:24}},[n(\"div\",{staticClass:\"postInfo-container\"},[n(\"el-row\",[n(\"el-col\",{attrs:{span:12}},[n(\"el-form-item\",{staticClass:\"postInfo-container-item\",attrs:{label:\"增强检测开关\",\"label-width\":\"120px\"}},[n(\"el-switch\",{attrs:{\"active-text\":\"开启\",\"inactive-text\":\"关闭\"},model:{value:t.postForm.enhanced_detection_enabled,callback:function(e){t.$set(t.postForm,\"enhanced_detection_enabled\",e)},expression:\"postForm.enhanced_detection_enabled\"}})],1)],1)],1),n(\"el-row\",[n(\"el-col\",{attrs:{span:12}},[n(\"el-form-item\",{staticClass:\"postInfo-container-item\",attrs:{label:\"组合流量检测时长\",\"label-width\":\"120px\"}},[n(\"el-input-number\",{attrs:{min:1,max:30,\"controls-position\":\"right\"},model:{value:t.postForm.combined_data_duration,callback:function(e){t.$set(t.postForm,\"combined_data_duration\",e)},expression:\"postForm.combined_data_duration\"}}),n(\"span\",{staticClass:\"input-description\"},[t._v(\"单位：秒\")])],1)],1)],1)],1)])],1)],1)],1)],1)},i=[],r=n(\"c7eb\"),o=n(\"1da1\"),s=n(\"b804\"),c=n(\"949f\"),u={enhanced_detection_enabled:!1,combined_data_duration:10},d={name:\"DetectionConfigEdit\",components:{Sticky:s[\"a\"]},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{postForm:Object.assign({},u),loading:!1,rules:{}}},created:function(){if(this.isEdit){var t=this.$route.params&&this.$route.params.id;this.fetchData(t)}},methods:{fetchData:function(t){var e=this;return Object(o[\"a\"])(Object(r[\"a\"])().mark((function n(){var a,i;return Object(r[\"a\"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.loading=!0,n.prev=1,n.next=4,Object(c[\"j\"])({id:t});case 4:a=n.sent,i=a.data,e.postForm={enhanced_detection_enabled:i.enhanced_detection_enabled,combined_data_duration:i.combined_data_duration},n.next=12;break;case 9:n.prev=9,n.t0=n[\"catch\"](1),console.error(\"Failed to fetch app details:\",n.t0);case 12:return n.prev=12,e.loading=!1,n.finish(12);case 15:case\"end\":return n.stop()}}),n,null,[[1,9,12,15]])})))()},submitForm:function(){var t=this;return Object(o[\"a\"])(Object(r[\"a\"])().mark((function e(){return Object(r[\"a\"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$refs.postForm.validate(function(){var e=Object(o[\"a\"])(Object(r[\"a\"])().mark((function e(n){var a,i;return Object(r[\"a\"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n){e.next=20;break}return t.loading=!0,e.prev=2,a=t.$route.params&&t.$route.params.id,i={enhanced_detection_enabled:t.postForm.enhanced_detection_enabled,combined_data_duration:t.postForm.combined_data_duration},e.next=7,Object(c[\"q\"])(a,i);case 7:t.$notify({title:\"成功\",message:\"保存成功\",type:\"success\",duration:2e3}),t.$router.back(),e.next=15;break;case 11:e.prev=11,e.t0=e[\"catch\"](2),console.error(\"提交失败:\",e.t0),t.$notify({title:\"错误\",message:\"保存失败\",type:\"error\",duration:2e3});case 15:return e.prev=15,t.loading=!1,e.finish(15);case 18:e.next=22;break;case 20:return console.log(\"表单校验失败\"),e.abrupt(\"return\",!1);case 22:case\"end\":return e.stop()}}),e,null,[[2,11,15,18]])})));return function(t){return e.apply(this,arguments)}}());case 1:case\"end\":return e.stop()}}),e)})))()}}},l=d,p=(n(\"81b8\"),n(\"2877\")),h=Object(p[\"a\"])(l,a,i,!1,null,\"14495dcf\",null);e[\"default\"]=h.exports},\"81b8\":function(t,e,n){\"use strict\";n(\"aa27\")},\"949f\":function(t,e,n){\"use strict\";n.d(e,\"f\",(function(){return i})),n.d(e,\"j\",(function(){return r})),n.d(e,\"o\",(function(){return o})),n.d(e,\"n\",(function(){return s})),n.d(e,\"k\",(function(){return c})),n.d(e,\"r\",(function(){return u})),n.d(e,\"q\",(function(){return d})),n.d(e,\"a\",(function(){return l})),n.d(e,\"g\",(function(){return p})),n.d(e,\"i\",(function(){return h})),n.d(e,\"m\",(function(){return m})),n.d(e,\"l\",(function(){return f})),n.d(e,\"e\",(function(){return b})),n.d(e,\"d\",(function(){return v})),n.d(e,\"b\",(function(){return g})),n.d(e,\"c\",(function(){return _})),n.d(e,\"h\",(function(){return w})),n.d(e,\"p\",(function(){return j}));var a=n(\"b775\");function i(t){return Object(a[\"a\"])({url:\"/api/target-app-list/\",method:\"get\",params:t})}function r(t){return Object(a[\"a\"])({url:\"/api/target-app/\",method:\"get\",params:t})}function o(t,e){return Object(a[\"a\"])({url:\"/api/target-app/\",method:\"put\",params:{id:t},data:e})}function s(t){return Object(a[\"a\"])({url:\"/api/target-app/\",method:\"post\",params:{},data:t})}function c(t){return Object(a[\"a\"])({url:\"/api/detection/features/\",method:\"get\",params:t})}function u(t,e){return Object(a[\"a\"])({url:\"/api/detection/features/\",method:\"put\",params:{app_id:t},data:e})}function d(t,e){return Object(a[\"a\"])({url:\"/api/detection/config/\",method:\"put\",params:{app_id:t},data:e})}function l(t){return Object(a[\"a\"])({url:\"/api/api-discovery/start/\",method:\"get\",params:t})}function p(t){return Object(a[\"a\"])({url:\"/api/api-discovery/status/\",method:\"get\",params:t})}function h(t){return Object(a[\"a\"])({url:\"/api/api-discovery/manual/status/\",method:\"get\",params:t})}function m(t){return Object(a[\"a\"])({url:\"/api/model-construct\",method:\"get\",params:t})}function f(t){return Object(a[\"a\"])({url:\"/api/model-construct/data-collection-status/\",method:\"get\",params:t})}function b(t){return Object(a[\"a\"])({url:\"/api/detection/start/\",method:\"get\",params:t})}function v(t){return Object(a[\"a\"])({url:\"/api/detection/pause/\",method:\"get\",params:t})}function g(t){return Object(a[\"a\"])({url:\"/api/api-discovery/cancel/\",method:\"get\",params:t})}function _(t){return Object(a[\"a\"])({url:\"/api/api-discovery/finish/\",method:\"get\",params:t})}function w(t){return Object(a[\"a\"])({url:\"/api/api-lists/\",method:\"get\",params:t})}function j(t,e){return Object(a[\"a\"])({url:\"/api/v2/user-api-list/\",method:\"put\",params:{app_id:t},data:e})}},aa27:function(t,e,n){},b804:function(t,e,n){\"use strict\";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{style:{height:t.height+\"px\",zIndex:t.zIndex}},[n(\"div\",{class:t.className,style:{top:t.isSticky?t.stickyTop+\"px\":\"\",zIndex:t.zIndex,position:t.position,width:t.width,height:t.height+\"px\"}},[t._t(\"default\",[n(\"div\",[t._v(\"sticky\")])])],2)])},i=[],r=(n(\"a9e3\"),n(\"2c3e\"),{name:\"Sticky\",props:{stickyTop:{type:Number,default:0},zIndex:{type:Number,default:1},className:{type:String,default:\"\"}},data:function(){return{active:!1,position:\"\",width:void 0,height:void 0,isSticky:!1}},mounted:function(){this.height=this.$el.getBoundingClientRect().height,window.addEventListener(\"scroll\",this.handleScroll),window.addEventListener(\"resize\",this.handleResize)},activated:function(){this.handleScroll()},destroyed:function(){window.removeEventListener(\"scroll\",this.handleScroll),window.removeEventListener(\"resize\",this.handleResize)},methods:{sticky:function(){this.active||(this.position=\"fixed\",this.active=!0,this.width=this.width+\"px\",this.isSticky=!0)},handleReset:function(){this.active&&this.reset()},reset:function(){this.position=\"\",this.width=\"auto\",this.active=!1,this.isSticky=!1},handleScroll:function(){var t=this.$el.getBoundingClientRect().width;this.width=t||\"auto\";var e=this.$el.getBoundingClientRect().top;e<this.stickyTop?this.sticky():this.handleReset()},handleResize:function(){this.isSticky&&(this.width=this.$el.getBoundingClientRect().width+\"px\")}}}),o=r,s=n(\"2877\"),c=Object(s[\"a\"])(o,a,i,!1,null,null,null);e[\"a\"]=c.exports}}]);","extractedComments":[]}